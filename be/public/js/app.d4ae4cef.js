(function(t){function e(e){for(var r,a,c=e[0],s=e[1],l=e[2],d=0,v=[];d<c.length;d++)a=c[d],i[a]&&v.push(i[a][0]),i[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);u&&u(e);while(v.length)v.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,c=1;c<n.length;c++){var s=n[c];0!==i[s]&&(r=!1)}r&&(o.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},i={app:0},o=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=s;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"2d64":function(t,e,n){"use strict";var r=n("3ca9"),i=n.n(r);i.a},"3ca9":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"container"},[n("router-view")],1)])},o=[],a=(n("5c0b"),n("2877")),c={},s=Object(a["a"])(c,i,o,!1,null,null,null),l=s.exports,u=n("8c4f"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("VTable")},v=[],p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col content-wrapper"},[n("div",{staticClass:"table-header"},[n("h4",[t._v("Clients")]),n("button",{staticClass:"btn btn-light",on:{click:function(e){return t.addClient()}}},[t._v("New Client")])]),t.isLoading?n("div",{staticClass:"article-preview"},[t._v("Loading clients...")]):n("div",[0===t.clients.length?n("div",{staticClass:"article-preview"},[t._v("\n            No clients are here... yet.\n        ")]):n("div",[n("table",{staticClass:"table table-bordered table-hover"},[t._m(0),n("tbody",t._l(t.clients,function(e){return n("tr",{key:e.id,attrs:{client:e}},[n("td",[t._v(t._s(e.name))]),n("td",[t._v(t._s(e.email))]),n("td",[t._v(t._s(e.phone))]),e.providers.length?[n("td",[t._v(t._s(e.providers.map(function(t){return t.name}).join(", ")))])]:[n("td",[t._v("No providers")])],n("td",[n("button",{staticClass:"btn btn-link",on:{click:function(n){return t.editClient(e)}}},[t._v("Edit")])])],2)}),0)]),n("VClient",{attrs:{"show-client":t.showClient,"close-client":t.closeClientRequest}}),n("VPagination",{attrs:{pages:t.pages,currentPage:t.currentPage},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)])])},f=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",{attrs:{scope:"col"}},[t._v("Name")]),n("th",{attrs:{scope:"col"}},[t._v("Email")]),n("th",{attrs:{scope:"col"}},[t._v("Phone")]),n("th",{attrs:{scope:"col"}},[t._v("Providers")]),n("th",{attrs:{scope:"col"}},[t._v("Actions")])])])}],m=(n("ac6a"),n("75fc")),h=n("cebc"),b=(n("c5f6"),n("2f62")),g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",[n("ul",{staticClass:"pagination"},t._l(t.pages,function(e){return n("li",{key:e,class:t.paginationClass(e),attrs:{"data-test":"page-link-"+e},on:{click:function(n){return n.preventDefault(),t.changePage(e)}}},[n("a",{staticClass:"page-link",attrs:{href:""},domProps:{textContent:t._s(e)}})])}),0)])},C=[],P={name:"Pagination",props:{pages:{type:Array,required:!0},currentPage:{type:Number,required:!0}},methods:{changePage:function(t){t!==this.currentPage&&this.$emit("update:currentPage",t)},paginationClass:function(t){return{"page-item":!0,active:this.currentPage===t}}}},w=P,_=Object(a["a"])(w,g,C,!1,null,null,null),O=_.exports,j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.showClient?n("div",[n("transition",{attrs:{name:"modal"}},[n("div",{staticClass:"modal-mask"},[n("div",{staticClass:"modal-wrapper"},[n("div",{staticClass:"modal-dialog"},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-header"},[n("h4",{staticClass:"modal-title"},[t._v(t._s(t.modalTitle))])]),n("div",{staticClass:"modal-body"},[n("div",{staticClass:"form-group"},[n("label",[t._v("Name")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.client.name,expression:"client.name"}],staticClass:"form-control",domProps:{value:t.client.name},on:{input:function(e){e.target.composing||t.$set(t.client,"name",e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",[t._v("Email")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.client.email,expression:"client.email"}],staticClass:"form-control",domProps:{value:t.client.email},on:{input:function(e){e.target.composing||t.$set(t.client,"email",e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",[t._v("Phone")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.client.phone,expression:"client.phone"}],staticClass:"form-control",domProps:{value:t.client.phone},on:{input:function(e){e.target.composing||t.$set(t.client,"phone",e.target.value)}}})]),n("div",{staticClass:"form-group reset-flex"},[n("label",[t._v("Providers")]),n("div",{staticClass:"col-md-6"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newProviderName,expression:"newProviderName"}],staticClass:"form-control",domProps:{value:t.newProviderName},on:{input:function(e){e.target.composing||(t.newProviderName=e.target.value)}}}),n("ul",{staticClass:"list-group"},t._l(t.providers,function(e){return n("li",{staticClass:"list-group-item",attrs:{provider:e}},[n("input",{attrs:{type:"checkbox"},domProps:{checked:t.clientHasProvider(e)},on:{change:function(n){return t.addOrRemoveProvider(e)}}}),n("p",[t._v(t._s(e.name))]),n("span",[n("a",{on:{click:function(n){return t.editProvider(e)}}},[n("octicon",{attrs:{name:"pencil",scale:"1"}})],1),n("a",{on:{click:function(n){return t.deleteProvider(e)}}},[n("octicon",{attrs:{name:"trashcan",scale:"1"}})],1)])])}),0)]),n("span",{staticClass:"col-md-4"},[n("button",{staticClass:"btn btn-light",on:{click:function(e){return t.addProvider()}}},[t._v("Add Provider")])])])]),n("div",{staticClass:"modal-footer"},[n("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.deleteClient()}}},[t._v("Delete client")]),n("span",[n("button",{staticClass:"btn btn-light",on:{click:t.hideClient}},[t._v("Cancel")]),n("button",{staticClass:"btn btn-light",on:{click:function(e){return t.saveClient()}}},[t._v("Save Client")])])])])])])])]),n("VProvider",{attrs:{"show-provider":t.showProvider,"close-provider":t.closeProviderRequest}})],1):t._e()},y=[],x=(n("7f7f"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.showProvider?n("div",[n("transition",{attrs:{name:"modal"}},[n("div",{staticClass:"modal-mask"},[n("div",{staticClass:"modal-wrapper"},[n("div",{staticClass:"modal-dialog"},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-header"},[n("h4",{staticClass:"modal-title"},[t._v("Edit Provider Name")])]),n("div",{staticClass:"modal-body"},[n("div",[n("span",[t._v("Provider Name")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.provider.name,expression:"provider.name"}],staticClass:"form-control",domProps:{value:t.provider.name},on:{input:function(e){e.target.composing||t.$set(t.provider,"name",e.target.value)}}})])]),n("div",{staticClass:"modal-footer"},[n("button",{staticClass:"btn",on:{click:t.hideProvider}},[t._v("Cancel")]),n("button",{staticClass:"btn",on:{click:function(e){return t.saveProvider()}}},[t._v("Save Provider")])])])])])])])],1):t._e()}),k=[],$="fetchClients",E="saveClient",N="deleteClient",R="setClientToUpdate",q="addProviderToClient",S="removeProviderFromClient",L="resetClientState",T="fetchProviders",V="createProvider",A="destroyProvider",M="editProvider",D="updateProvider",H={name:"VDialog",props:{editedProviderName:"",closeProvider:{},showProvider:{type:Boolean,required:!0}},computed:Object(h["a"])({},Object(b["b"])(["provider"])),methods:{hideProvider:function(){this.closeProvider(!1)},saveProvider:function(){this.$store.dispatch(M,this.provider),this.hideProvider()}}},B=H,J=(n("c57a"),Object(a["a"])(B,x,k,!1,null,"b5cd7d6e",null)),U=J.exports,F={name:"VModal",components:{VProvider:U},props:{showClient:{type:Boolean,required:!0},closeClient:{}},data:function(){return{currentPage:1,selectedClient:{},showProvider:!1,newProviderName:""}},computed:Object(h["a"])({},Object(b["b"])(["providers","client"]),{modalTitle:function(){return this.client.name?"Edit Client":"Create Client"}}),mounted:function(){this.fetchProviders()},methods:{hideClient:function(){this.closeClient(!1)},closeProviderRequest:function(t){this.showProvider=t},addOrRemoveProvider:function(t){this.clientHasProvider(t)?this.$store.dispatch(S,t):this.$store.dispatch(q,t)},clientHasProvider:function(t){return this.client.providers.some(function(e){return e._id===t._id})},fetchProviders:function(){this.$store.dispatch(T)},addProvider:function(){this.newProviderName&&this.$store.dispatch(V,{name:this.newProviderName})},editProvider:function(t){this.showProvider=!0,this.$store.dispatch(D,t)},deleteProvider:function(t){this.$store.dispatch(A,t)},saveClient:function(){this.$store.dispatch(E),this.hideClient()},deleteClient:function(){this.$store.dispatch(N,this.client),this.hideClient()}}},z=F,G=(n("2d64"),Object(a["a"])(z,j,y,!1,null,"d9a85112",null)),I=G.exports,K="setLoading",Q="setClients",W="setClient",X="addClient",Y="removeClient",Z="addProviderToClient",tt="removeProviderToClient",et="setProvider",nt="setProviders",rt="addProvider",it="removeProvider",ot="resetClientState",at={name:"VTable",components:{VPagination:O,VClient:I},props:{itemsPerPage:{type:Number,required:!1,default:1}},data:function(){return{currentPage:1,selectedClient:{},showClient:!1}},computed:Object(h["a"])({tableConfig:function(){var t={offset:(this.currentPage-1)*this.itemsPerPage,limit:this.itemsPerPage};return{filters:t}},pages:function(){return this.isLoading||this.clientsCount<=this.itemsPerPage?[]:Object(m["a"])(Array(Math.ceil(this.clientsCount/this.itemsPerPage)).keys()).map(function(t){return t+1})}},Object(b["b"])(["clientsCount","isLoading","clients"])),watch:{currentPage:function(t){this.tableConfig.filters.offset=(t-1)*this.itemsPerPage,this.fetchClients()}},mounted:function(){this.fetchClients()},methods:{closeClientRequest:function(t){this.showClient=t},addClient:function(){this.$store.commit(ot),this.showClient=!0},editClient:function(t){this.showClient=!0,this.$store.dispatch(R,t)},fetchClients:function(){this.$store.dispatch($,this.tableConfig)}}},ct=at,st=(n("de1c"),Object(a["a"])(ct,p,f,!1,null,"29a6f6ba",null)),lt=st.exports,ut={components:{VTable:lt}},dt=ut,vt=Object(a["a"])(dt,d,v,!1,null,null,null),pt=vt.exports;r["a"].use(u["a"]);var ft,mt,ht,bt,gt=new u["a"]({routes:[{path:"/",name:"table",component:pt}]}),Ct=n("bd86"),Pt=(n("96cf"),n("3b8d")),wt=n("bc3a"),_t=n.n(wt),Ot=n("a7fe"),jt=n.n(Ot),yt="http://localhost:3000/",xt={init:function(){r["a"].use(jt.a,_t.a),r["a"].axios.defaults.baseURL=yt},query:function(t,e){return r["a"].axios.get(t,e).catch(function(t){throw new Error(" ApiService ".concat(t))})},get:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return r["a"].axios.get("".concat(t,"/").concat(e)).catch(function(t){throw new Error(" ApiService ".concat(t))})},post:function(t,e){return r["a"].axios.post("".concat(t),e)},update:function(t,e,n){return r["a"].axios.put("".concat(t,"/").concat(e),n)},delete:function(t){return r["a"].axios.delete(t).catch(function(t){throw new Error(" ApiService ".concat(t))})}},kt=xt,$t={query:function(t){return xt.query("client",{params:t})},get:function(t){return xt.get("client",t)},create:function(t){return xt.post("client",{client:t})},update:function(t,e){return xt.update("client",t,{client:e})},destroy:function(t){return xt.delete("client/".concat(t))}},Et={getAll:function(){return xt.get("provider")},get:function(t){return xt.get("provider",t)},create:function(t){return xt.post("provider",{provider:t})},update:function(t,e){return xt.update("provider",t,{provider:e})},destroy:function(t){return xt.delete("provider/".concat(t))}},Nt={client:{_id:"",name:"",email:"",phone:"",providers:[]},clients:[],clientsCount:0,isLoading:!0},Rt=Object(h["a"])({},Nt),qt=(ft={},Object(Ct["a"])(ft,$,function(t,e){var n=t.commit;return n(K),console.log(e.filters),$t.query(e.filters).then(function(t){var e=t.data;n(Q,e)}).catch(function(t){throw new Error(t)})}),Object(Ct["a"])(ft,R,function(t,e){t.commit(W,e)}),Object(Ct["a"])(ft,E,function(t){var e=t.state;return e.client._id?$t.update(e.client._id,e.client).catch(function(t){throw new Error(t)}):$t.create(e.client).catch(function(t){throw new Error(t)})}),Object(Ct["a"])(ft,N,function(){var t=Object(Pt["a"])(regeneratorRuntime.mark(function t(e,n){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,$t.destroy(n._id);case 2:e.commit(Y,n);case 3:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()),Object(Ct["a"])(ft,q,function(t,e){t.commit(Z,e)}),Object(Ct["a"])(ft,S,function(t,e){t.commit(tt,e)}),Object(Ct["a"])(ft,L,function(t){var e=t.commit;e(ot)}),ft),St=(mt={},Object(Ct["a"])(mt,K,function(t){t.isLoading=!0}),Object(Ct["a"])(mt,Q,function(t,e){var n=e.clients,r=e.clientsCount;t.clients=n,t.clientsCount=r,t.isLoading=!1}),Object(Ct["a"])(mt,X,function(t,e){t.clients=t.clients.concat([e]),t.clientsCount++}),Object(Ct["a"])(mt,Y,function(t,e){t.clients=t.clients.filter(function(t){return t._id!==e._id}),t.clientsCount--}),Object(Ct["a"])(mt,Z,function(t,e){t.client.providers=t.client.providers.concat([e])}),Object(Ct["a"])(mt,tt,function(t,e){t.client.providers=t.client.providers.filter(function(t){return t._id!==e._id})}),Object(Ct["a"])(mt,W,function(t,e){t.client=e}),Object(Ct["a"])(mt,ot,function(){r["a"].set(Rt,"client",Nt["client"])}),mt),Lt={client:function(t){return t.client},clients:function(t){return t.clients},clientsCount:function(t){return t.clientsCount},isLoading:function(t){return t.isLoading}},Tt={state:Rt,actions:qt,mutations:St,getters:Lt},Vt={provider:{_id:"",name:""},providers:[]},At=Object(h["a"])({},Vt),Mt=(ht={},Object(Ct["a"])(ht,T,function(){var t=Object(Pt["a"])(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Et.getAll().catch(function(t){throw new Error(t)});case 2:return n=t.sent,r=n.data,e.commit(nt,r.providers),t.abrupt("return",r.providers);case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()),Object(Ct["a"])(ht,V,function(){var t=Object(Pt["a"])(regeneratorRuntime.mark(function t(e,n){var r,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Et.create(n).catch(function(t){throw new Error(t)});case 2:r=t.sent,i=r.data,e.commit(rt,i.provider);case 5:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()),Object(Ct["a"])(ht,A,function(){var t=Object(Pt["a"])(regeneratorRuntime.mark(function t(e,n){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Et.destroy(n._id).catch(function(t){throw new Error(t)});case 2:e.commit(it,n);case 3:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()),Object(Ct["a"])(ht,M,function(){var t=Object(Pt["a"])(regeneratorRuntime.mark(function t(e,n){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Et.update(n._id,n).catch(function(t){throw new Error(t)});case 2:e.commit(et,n);case 3:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()),Object(Ct["a"])(ht,D,function(t,e){t.commit(et,e)}),ht),Dt=(bt={},Object(Ct["a"])(bt,nt,function(t,e){t.providers=e}),Object(Ct["a"])(bt,rt,function(t,e){t.providers=t.providers.concat([e])}),Object(Ct["a"])(bt,it,function(t,e){t.providers=t.providers.filter(function(t){return t._id!==e._id})}),Object(Ct["a"])(bt,et,function(t,e){t.provider=e}),bt),Ht={provider:function(t){return t.provider},providers:function(t){return t.providers}},Bt={state:At,actions:Mt,mutations:Dt,getters:Ht};r["a"].use(b["a"]);var Jt=new b["a"].Store({modules:{client:Tt,provider:Bt}}),Ut=(n("886f"),n("8ab8")),Ft=function(t){return"".concat(t[0])};r["a"].component("octicon",Ut["a"]),kt.init(),r["a"].filter("error",Ft),new r["a"]({router:gt,store:Jt,render:function(t){return t(l)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var r=n("5e27"),i=n.n(r);i.a},"5e27":function(t,e,n){},c57a:function(t,e,n){"use strict";var r=n("e4b2"),i=n.n(r);i.a},de1c:function(t,e,n){"use strict";var r=n("e5be"),i=n.n(r);i.a},e4b2:function(t,e,n){},e5be:function(t,e,n){}});
//# sourceMappingURL=app.d4ae4cef.js.map